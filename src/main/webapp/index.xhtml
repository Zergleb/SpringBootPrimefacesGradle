<f:view xmlns="http://www.w3c.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
        >
    <h:head/>
    <h:body>
        <h:form prependId="false">
            This file illustrates PrimeFaces bug 6184 (see https://code.google.com/p/primefaces/issues/detail?id=6184).<br/>
            <br/>
            After clicking the button there should be two error messages behind the input field.<br/>
            <ul>
                <li>Using the Client Side Validation, both error messages are displayed behind the input field.</li>
                <li>Using Server Side Validation, only one message is displayed. Unfortunately, the second message is an error message, but it is suppressed.</li>
            </ul>
            To activate server side validation, you have to set the parameter in com.anderl.main.Initializer (line 15)
            and you have to remove the annotations of com.anderl.controller.SmallNumberBean (lines 29 and 30).
            <br/><br/>
            <h:panelGrid
                    columns="3">

                <p:outputLabel for="@next" value="small number (less than 10)"/>
                <p:inputText value="#{smallNumberBean.smallNumber}" required="true" label="small number"
                             id="smallNumberID"/>
                <p:message for="@previous"/>
                <p:commandButton validateClient="true" value="validate" actionListener="#{smallNumberBean.showErrors}"
                                 update="@parent:@parent"/>
                <br/>
            </h:panelGrid>
            <p:commandButton value="save new TestEntity" actionListener="#{testController.saveNewTestEntity()}"
                             process="@this"
                             update="@parent"/>

            <br/>
            <p:dataTable value="#{testEntityRepository.findAll()}" var="entity">
                <p:column headerText="id">
                    #{entity.id}
                </p:column>
                <p:column headerText="name">
                    #{entity.name}
                </p:column>
                <p:column headerText="age">
                    #{entity.age}
                </p:column>
            </p:dataTable>
            <br/>
            Search by criterias
            <br/>
            <p:inputText id="idCriterion" value="#{testController.idCriterion.value}"/>
            <p:inputText id="nameCriterion" value="#{testController.nameCriterion.value}"/>
            <p:inputText id="ageCriterion" value="#{testController.ageCriterion.value}"/>
            <p:dataTable value="#{testController.search()}" var="entity">
                <p:column headerText="id">
                    #{entity.id}
                </p:column>
                <p:column headerText="name">
                    #{entity.name}
                </p:column>
                <p:column headerText="age">
                    #{entity.age}
                </p:column>
            </p:dataTable>
            <p:commandButton validateClient="true" value="validate"
                             process="@this, idCriterion, nameCriterion, ageCriterion"
                             update="@parent:@parent"/>
            <br/>
            #{testController}
        </h:form>
    </h:body>
</f:view>